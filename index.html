<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>d3.heatmap</title>
</head>

<body>
  <div id="options"></div>

  <!-- graph will take place here -->
  <div id="graph"></div>

  <script type="module">
    import * as d3 from "https://cdn.skypack.dev/d3@7";
    import { drawHeatmap } from "./src/heatmap.js";

    const div = d3.selectAll("div");

    const svg = d3.select("#graph").append("svg");

    // read local json file
    let object;
    let httpRequest = new XMLHttpRequest(); // asynchronous request
    httpRequest.open("GET", "./result.json", true);
    httpRequest.send();
    httpRequest.addEventListener("readystatechange", function () {
      if (this.readyState === this.DONE) {
        // when the request has completed
        object = JSON.parse(this.response);

        let options = document.getElementById("options");

        let heatmapButton = document.createElement("button");
        heatmapButton.innerHTML = "Generate Heatmap";
        heatmapButton.addEventListener("click", () => {
          drawHeatmap(svg, object, 100000, 50);
        });
        options.appendChild(heatmapButton);
      }
    });


  </script>

</body>

</html>